<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Understanding A/B Testing and Statistics Behind - Pieces of Data Science</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://byrony.github.io/understanding-ab-testing-and-statistics-behind.html">

        <meta name="author" content="Vincent Cao" />
        <meta name="keywords" content="A/B testing,Statistics,t test,z test,chi-square test" />
        <meta name="description" content="1. A trivial example: flipping a coin¶Question: A coin is tossed for 100 times, heads appeared 65 times, tails appeared 35 times. Construct a hypothesis test to check whether the coin is fair. ($P_{head}=P_{tail}=\frac{1}{2}$) Hypothesis: $$H_0:P_{h}=0.5, H_a:P_{h}\neq 0.5$$ (1) Z test¶Since for binomial distribution, each trial is either 0 or 1, so the sample mean is also the proportion of success. Since for this experiment, we already know the distribution of tossing coin is a binomial distribution, let $X$ to be the count of sucesses, then: $$\mu_X = np$$ $$\sigma^2_X=np(1-p)$$" />

        <meta property="og:site_name" content="Pieces of Data Science" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Understanding A/B Testing and Statistics Behind"/>
        <meta property="og:url" content="https://byrony.github.io/understanding-ab-testing-and-statistics-behind.html"/>
        <meta property="og:description" content="1. A trivial example: flipping a coin¶Question: A coin is tossed for 100 times, heads appeared 65 times, tails appeared 35 times. Construct a hypothesis test to check whether the coin is fair. ($P_{head}=P_{tail}=\frac{1}{2}$) Hypothesis: $$H_0:P_{h}=0.5, H_a:P_{h}\neq 0.5$$ (1) Z test¶Since for binomial distribution, each trial is either 0 or 1, so the sample mean is also the proportion of success. Since for this experiment, we already know the distribution of tossing coin is a binomial distribution, let $X$ to be the count of sucesses, then: $$\mu_X = np$$ $$\sigma^2_X=np(1-p)$$"/>
        <meta property="article:published_time" content="2017-03-12" />
            <meta property="article:section" content="Statistics" />
            <meta property="article:tag" content="A/B testing" />
            <meta property="article:tag" content="Statistics" />
            <meta property="article:tag" content="t test" />
            <meta property="article:tag" content="z test" />
            <meta property="article:tag" content="chi-square test" />
            <meta property="article:author" content="Vincent Cao" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://byrony.github.io/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://byrony.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://byrony.github.io/theme/css/pygments/default.css" rel="stylesheet">
    <link rel="stylesheet" href="https://byrony.github.io/theme/css/style.css" type="text/css"/>

        <link href="https://byrony.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Pieces of Data Science ATOM Feed"/>



        <link href="https://byrony.github.io/feeds/statistics.atom.xml" type="application/atom+xml" rel="alternate"
              title="Pieces of Data Science Statistics ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://byrony.github.io/" class="navbar-brand">
Pieces of Data Science            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="https://byrony.github.io/category/about-me.html">About me</a>
                        </li>
                        <li >
                            <a href="https://byrony.github.io/category/data-analysis.html">Data analysis</a>
                        </li>
                        <li >
                            <a href="https://byrony.github.io/category/mini-project.html">Mini project</a>
                        </li>
                        <li >
                            <a href="https://byrony.github.io/category/r.html">R</a>
                        </li>
                        <li class="active">
                            <a href="https://byrony.github.io/category/statistics.html">Statistics</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="https://byrony.github.io/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="https://byrony.github.io/understanding-ab-testing-and-statistics-behind.html"
                       rel="bookmark"
                       title="Permalink to Understanding A/B Testing and Statistics Behind">
                        Understanding A/B Testing and Statistics Behind
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2017-03-12T20:00:00-04:00"> Sun 12 March 2017</time>
    </span>





<span class="label label-default">Tags</span>
	<a href="https://byrony.github.io/tag/ab-testing.html">A/B testing</a>
        /
	<a href="https://byrony.github.io/tag/statistics.html">Statistics</a>
        /
	<a href="https://byrony.github.io/tag/t-test.html">t test</a>
        /
	<a href="https://byrony.github.io/tag/z-test.html">z test</a>
        /
	<a href="https://byrony.github.io/tag/chi-square-test.html">chi-square test</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><br /></p>
<p><center><img ,="" src="./figure/ab-testing.png" width="450" /></center>
<br /></p>
<h3 id="1.-A-trivial-example:-flipping-a-coin">1. A trivial example: flipping a coin<a class="anchor-link" href="#1.-A-trivial-example:-flipping-a-coin">¶</a></h3><p><strong>Question</strong>:</p>
<p>A coin is tossed for 100 times, heads appeared 65 times, tails appeared 35 times. Construct a hypothesis test to check whether the coin is fair. ($P_{head}=P_{tail}=\frac{1}{2}$)</p>
<p><strong>Hypothesis</strong>:
$$H_0:P_{h}=0.5, H_a:P_{h}\neq 0.5$$</p>
<h4 id="(1)-Z-test">(1) Z test<a class="anchor-link" href="#(1)-Z-test">¶</a></h4><p>Since for binomial distribution, each trial is either 0 or 1, so the sample mean is also the proportion of success. Since for this experiment, we already know the distribution of tossing coin is a binomial distribution, let $X$ to be the count of sucesses, then:
$$\mu_X = np$$
$$\sigma^2_X=np(1-p)$$</p>
<p>the SD (Standard Deviation) $\sigma$ is known, we need compute SE (Standard Error) for mean. The sample mean actually is the sample proportion of sucessess, $\hat{p}=\frac{X}{n}$, so:
$$\bar{X}=\mu_p=np/n=p$$
$$var(\bar{X}) = \frac{var(X)}{n^2} = \frac{p(1-p)}{n}$$</p>
<p>Therefore, SE for the mean is $\sigma/n=\sqrt{p(1-p)/n}$.</p>
<p>As the $\sigma$ is known, we can use Z test.</p>
<p><strong>Z statistic</strong>: 
$$z = \frac{\bar{X}-\mu}{SE}=\frac{\bar{X}-\mu}{\sigma/\sqrt{n}}=\frac{\bar{X}-\mu}{\sqrt{p(1-p)/n}}=\frac{0.65-0.5}{\sqrt{0.5*0.5/100}}=3$$</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># compute p-value</span>
X_bar <span class="o"><-</span> <span class="m">0.65</span>
mean <span class="o"><-</span> <span class="m">0.5</span>
len <span class="o"><-</span> <span class="m">100</span>
p <span class="o"><-</span> <span class="m">0.5</span>
z <span class="o"><-</span> <span class="p">(</span>X_bar <span class="o">-</span> <span class="kp">mean</span><span class="p">)</span> <span class="o">/</span> <span class="kp">sqrt</span><span class="p">(</span>p<span class="o">*</span><span class="p">(</span><span class="m">1</span><span class="o">-</span>p<span class="p">)</span> <span class="o">/</span>len<span class="p">)</span>
p_value <span class="o"><-</span> <span class="m">1</span> <span class="o">-</span> pnorm<span class="p">(</span>z<span class="p">)</span>
p_value<span class="o">*</span><span class="m">2</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
0.00269979606326021
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For a two-tailed Z test, P value is smaller than 0.05, so it rejected the null hypothesis.</p>
<p><br /></p>
<h4 id="(2)-Binomial-test">(2) Binomial test<a class="anchor-link" href="#(2)-Binomial-test">¶</a></h4><p>From the experiment, we know $X\sim Binomial(100, 0.5)$. P-value is the probability that we see as extreme as or more extreme than the observed one. So we can compute the porbability that $X$ is greater than or equal to observation.
$$P(X>=70)=\sum_{k=70}^{100} p^k(1-p)^{10-k}$$</p>
<p>There are multiple ways to implement binomial test in R. We tried three of them.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># method 1: use binom.test</span>
binom.test<span class="p">(</span>x<span class="o">=</span><span class="m">65</span><span class="p">,</span> n<span class="o">=</span><span class="m">100</span><span class="p">,</span> p<span class="o">=</span><span class="m">0.5</span><span class="p">,</span> alternative <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">'two.sided'</span><span class="p">),</span> conf.level <span class="o">=</span> <span class="m">0.95</span><span class="p">)</span>

<span class="c1"># method 2: compute the probability >= observation by hand</span>
P <span class="o"><-</span> <span class="m">0</span>
<span class="kr">for</span> <span class="p">(</span>k <span class="kr">in</span> <span class="kp">seq</span><span class="p">(</span><span class="m">65</span><span class="p">,</span> <span class="m">100</span><span class="p">)){</span>
  P <span class="o"><-</span> P <span class="o">+</span> dbinom<span class="p">(</span>k<span class="p">,</span> len<span class="p">,</span> prob<span class="o">=</span>p<span class="p">)</span>
<span class="p">}</span>
P<span class="o">*</span><span class="m">2</span>

<span class="c1"># method 3: compute cdf of binomial directly</span>
<span class="m">2</span><span class="o">*</span>pbinom<span class="p">(</span><span class="m">100-65</span><span class="p">,</span> size <span class="o">=</span> len<span class="p">,</span> prob <span class="o">=</span> p<span class="p">)</span> <span class="c1"># same as (1-pbinom(64, size = len, prob = p))*2</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_text output_subarea ">
<pre>
	Exact binomial test

data:  65 and 100
number of successes = 65, number of trials = 100, p-value = 0.003518
alternative hypothesis: true probability of success is not equal to 0.5
95 percent confidence interval:
 0.5481506 0.7427062
sample estimates:
probability of success 
                  0.65 
</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
0.00351764172297016
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
0.00351764172297016
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The P-value computed by three methods are consistent. We rejected the null hypothesis.</p>
<ul>
<li><strong>Normal Approximation to Binomial</strong>:</li>
</ul>
<p>According to <strong>Central Limit Theorem</strong>, as each toss is a bernoulli trial, so the sum/mean of the sample has a limiting normal distribution. That is, we can use normal distribution to approximate binomial distribution (sum of bernoulli) when n is large. As we showed below, the p-value computed from normal distribution is quite close to binomial distribution. (Note we did a "continuity correction" to make the approximation more precise, see <a href="https://onlinecourses.science.psu.edu/stat414/node/179">here</a>)</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># normal approximation</span>
X_bar <span class="o"><-</span> <span class="m">65-0.5</span> <span class="c1"># continuity correction </span>
mean <span class="o"><-</span> <span class="m">50</span>
len <span class="o"><-</span> <span class="m">100</span>
p <span class="o"><-</span> <span class="m">0.5</span>
z <span class="o"><-</span> <span class="p">(</span>X_bar <span class="o">-</span> <span class="kp">mean</span><span class="p">)</span> <span class="o">/</span> <span class="kp">sqrt</span><span class="p">(</span>p<span class="o">*</span><span class="p">(</span><span class="m">1</span><span class="o">-</span>p<span class="p">)</span> <span class="o">*</span>len<span class="p">)</span>
p_value <span class="o"><-</span> <span class="m">1</span> <span class="o">-</span> pnorm<span class="p">(</span>z<span class="p">)</span>
p_value<span class="o">*</span><span class="m">2</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
0.00373162660076809
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="(3)-Distribution-of-number-of-successes-VS.-Distribution-of-proportion-of-successes.">(3) Distribution of number of successes VS. Distribution of proportion of successes.<a class="anchor-link" href="#(3)-Distribution-of-number-of-successes-VS.-Distribution-of-proportion-of-successes.">¶</a></h4><p>We have mentioned this concept in the first part, but those two concepts are easy to get confused. We need more discussion to make it clear.</p>
<ul>
<li>Prerequisite knowledge: <strong>Central Limit Theorem</strong></li>
</ul>
<p>The Central Limit Theorem (CLT) implies a sample of independent random variables, their sums tends towards to a normal distribution even if the original variables themselves aren't normally distributed, also the sample mean tends towards to a normal distribution (sum and mean are equivalent).</p>
<p>For the sample in this problem, each variable is bernoulli distributed, so the sums is binomail distributed.</p>
<ul>
<li><strong>Distribution of number of successes:</strong></li>
</ul>
<p>If we consider the sum of random variable in a sample, according to CLT, when n increases, the sum approximates a normal distribution, $$X \sim N(np, np(1-p))$$</p>
<ul>
<li><strong>Distribution of proportion of successes:</strong></li>
</ul>
<p>If we consider the mean of random variable in a sample, according to CLT, when n increases, the mean approximates a normal distribution, $$\bar{X} \sim N(\frac{np}{p}, \frac{np(1-p)}{p^2}) = N(n, \frac{p(1-p)}{n})$$</p>
<ul>
<li><strong>Another Hypothesis test:</strong> </li>
</ul>
<p>If the coin if fair, then the expected number of heads in 100 tosses is 50. Given the null hypothesis (coin is fair, or expectation of successes is 50), we want to test whether our observation (65 heads in 100 tosses) is significant different from the expectation of number of heads ($\mu=100\times 0.5=50$). Use the sum of successes $X$ to construct the test statistics, then
$H_0:X=50, H_a:X\neq 50$
$$\frac{X-\mu}{SD}=\frac{X-np}{\sqrt{np(1-p)}} = \frac{650-500}{\sqrt{100*0.5*(1-0.5)}} = 3$$
This is equivalent as the test statistics constructed by proportion of successes.</p>
<p><br /></p>
<h3 id="2.-A/B-testing:-Ads-Click-Through-Rate">2. A/B testing: Ads Click Through Rate<a class="anchor-link" href="#2.-A/B-testing:-Ads-Click-Through-Rate">¶</a></h3><p><strong>Question:</strong></p>
<p>Two Ads, Ad one has 1000 impressions and 20 clicks, CTR is 2%; Ad two has 900 impressions and 30 clicks, CTR is 3.3%. Test whether there is difference between Click Through Rate (CTR) between Ad one and two.</p>
<p><strong>t test for two population:</strong></p>
<p>Similar to the first question, we know sample mean of each experiment is the CTR we need compare. According to CTR, sample mean is limiting normal distributed. Then we have
$$\bar{X}_1 \sim N(p_1, p_1(1-p_1)/n_1)$$
$$\bar{X}_2 \sim N(p_2, p_2(1-p_2)/n_2)$$
$$\bar{X}_1 - \bar{X}_2  \sim N(p_1-p_2, \frac{p_1(1-p_1)}{n_1} + \frac{p_2(1-p_2)}{n_2})$$</p>
<p><strong>Hypothesis</strong>:
$$H_0:\bar{X}_1 - \bar{X}_2 = 0, H_a:\bar{X}_1 - \bar{X}_2 \neq 0$$</p>
<p><strong>t test statistic:</strong>
$$ t = \frac{\bar{X}_1 - \bar{X}_2 - 0}{SE} = \frac{\bar{X}_1 - \bar{X}_2 - 0} {\sqrt{\frac{p_1(1-p_1)}{n_1} + \frac{p_2(1-p_2)}{n_2}}}$$</p>
<p>Since standard deviation of the sample $S_1=\sqrt{p_1(1-p_1)}$ is different from $S_2=\sqrt{p_2(1-p_2)}$, we use the unpooled standard error t-test (usually one SE should twice more than another SE, but in this case they're not that different). For unpooled t-test, the degree of freedom we choose $min(n_1-1, n_2-2)$. For more details of pooled and unpooled standard error method, check the notes of PSU <a href="https://onlinecourses.science.psu.edu/stat200/node/60">here</a>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span>n1 <span class="o"><-</span> <span class="m">1000</span><span class="p">;</span> n2<span class="o"><-</span> <span class="m">900</span><span class="p">;</span> click1 <span class="o"><-</span> <span class="m">20</span><span class="p">;</span> click2 <span class="o"><-</span> <span class="m">30</span>
x1 <span class="o"><-</span> click1<span class="o">/</span>n1<span class="p">;</span> x2 <span class="o"><-</span> click2<span class="o">/</span>n2
p1 <span class="o"><-</span> x1<span class="p">;</span> p2 <span class="o"><-</span> x2
SE <span class="o"><-</span> <span class="kp">sqrt</span><span class="p">(</span> p1<span class="o">*</span><span class="p">(</span><span class="m">1</span><span class="o">-</span>p1<span class="p">)</span><span class="o">/</span>n1 <span class="o">+</span> p2<span class="o">*</span><span class="p">(</span><span class="m">1</span><span class="o">-</span>p2<span class="p">)</span><span class="o">/</span>n2 <span class="p">)</span>
t <span class="o"><-</span> <span class="kp">abs</span><span class="p">((</span>x1 <span class="o">-</span> x2<span class="p">))</span> <span class="o">/</span> SE
p_value <span class="o"><-</span> <span class="m">1</span><span class="o">-</span>pt<span class="p">(</span><span class="kp">t</span><span class="p">,</span> df <span class="o">=</span> <span class="kp">min</span><span class="p">(</span>n1 <span class="m">-1</span><span class="p">,</span> n2 <span class="m">-1</span><span class="p">)</span> <span class="p">)</span>
p_value <span class="o">*</span> <span class="m">2</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
0.0735775780571641
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For a two-tailed t test, P-value is greater than 0.05, fail to reject null hypothesis. However, if we have prior knowledge and know Ad two could be no worse than Ad one. Then we can modify the hypothesis and check if the CTR of Ad two is great than Ad one.</p>
<p><strong>Hypothesis for one-tailed test</strong>:
$$H_0:\bar{X}_1 - \bar{X}_2 = 0, H_a:\bar{X}_2 - \bar{X}_1 > 0$$</p>
<p>This is a one-tailed t test. The P-value is half of the previous one and less than 0.05. We reject the null hypothesis and say we're 95% condifent Ad 2 has higher CTR than Ad 1. However, we must know choosing one-tailed test after running a two-tailed test that failed to reject the null hypothesis is wrong. For when a one-tailed test is appropriate, see <a href="http://stats.idre.ucla.edu/other/mult-pkg/faq/general/faq-what-are-the-differences-between-one-tailed-and-two-tailed-tests/">here</a>.</p>
<p><strong>Why use t-test rather than Z-test?</strong></p>
<p>We use t-test instead of Z-test since we don't know the standard deviation of the population. So we use the standard deviation of sample to replace the unknown standard deviation of the population, then t-test should be implemented. Notice this is different from the first example where observation mean is compared with expected mean. As there is only one population, assume the null hypothesis is true then standard deviation of population can be computed.</p>
<p>(Note: Binomial distribution is different from normal distribution, for bernoulli, we can compute SD if we know mean, but the normal distribution, SD is still unknown even if mean is known. So for a normal sample, we still need t-test. e.g. given a sample of male weight, test whether the mean equals to 70kg, use t-test since $\sigma$ is unknown.)</p>
<p><br /></p>
<h3 id="3.-A/B-testing-continue:-Chi-square-$\chi^2$-test">3. A/B testing continue: Chi-square $\chi^2$ test<a class="anchor-link" href="#3.-A/B-testing-continue:-Chi-square-$\chi^2$-test">¶</a></h3><p>Chi-square test can be used for two purposed:</p>
<ul>
<li>Goodness of fit test. When you have a categorical variable from a single population, test whether sample data are consistent with a hypothesis. For explanation and example, see <a href="http://stattrek.com/chi-square-test/goodness-of-fit.aspx?Tutorial=AP">here</a></li>
<li>Test for independence. When you have two categorical variables from a single population, test whether there is a significant association between the two variables. For explanation and example, see <a href="http://stattrek.com/chi-square-test/independence.aspx?Tutorial=AP">here</a> and <a href="https://onlinecourses.science.psu.edu/stat500/node/56">here</a></li>
</ul>
<p>Let's see the Ads click exmaple again. It can be regarded as two categorical variables, Ad 1 vs. Ad 2, Clicks vs. NonClicks. The original table and table with expected value are showed below.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="kn">library</span><span class="p">(</span>knitr<span class="p">)</span>
Clicks <span class="o"><-</span> <span class="kt">c</span><span class="p">(</span><span class="m">20</span><span class="p">,</span> <span class="m">30</span><span class="p">)</span>
Impressions <span class="o"><-</span> <span class="kt">c</span><span class="p">(</span><span class="m">1000</span><span class="p">,</span> <span class="m">900</span><span class="p">)</span>
NonClicks <span class="o"><-</span> Impressions <span class="o">-</span> Clicks
ad <span class="o"><-</span> <span class="kt">data.frame</span><span class="p">(</span>Clicks<span class="p">,</span> NonClicks<span class="p">,</span> Impressions<span class="p">)</span>
ad <span class="o"><-</span> <span class="kp">rbind</span><span class="p">(</span>ad<span class="p">,</span> <span class="s">'Column total'</span> <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">50</span><span class="p">,</span> <span class="m">1850</span><span class="p">,</span> <span class="m">1900</span><span class="p">))</span>
<span class="kp">row.names</span><span class="p">(</span>ad<span class="p">)</span> <span class="o"><-</span> <span class="kt">c</span><span class="p">(</span><span class="s">'Ad 1'</span><span class="p">,</span> <span class="s">'Ad 2'</span><span class="p">,</span> <span class="s">'Column Total'</span><span class="p">)</span>
kable<span class="p">(</span>ad<span class="p">,</span> align <span class="o">=</span> <span class="s">'l'</span><span class="p">)</span>

<span class="c1"># compute the mean and chi-square score with the online tool:</span>
<span class="c1"># http://www.socscistatistics.com/tests/chisquare/Default2.aspx</span>
ad2 <span class="o"><-</span> ad
ad2<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">]</span> <span class="o"><-</span> <span class="s">'20   (26.32)   [1.52]'</span>
ad2<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">]</span> <span class="o"><-</span> <span class="s">'980   (973.68)   [0.04]'</span>
ad2<span class="p">[</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">]</span> <span class="o"><-</span> <span class="s">'30   (23.68)   [1.68]'</span>
ad2<span class="p">[</span><span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">]</span> <span class="o"><-</span> <span class="s">'870   (876.32)   [0.05]'</span>
kable<span class="p">(</span>ad2<span class="p">,</span> align <span class="o">=</span> <span class="s">'l'</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_text output_subarea ">
<pre>

|             |Clicks |NonClicks |Impressions |
|:------------|:------|:---------|:-----------|
|Ad 1         |20     |980       |1000        |
|Ad 2         |30     |870       |900         |
|Column Total |50     |1850      |1900        |</pre>
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_text output_subarea ">
<pre>

|             |Clicks                |NonClicks               |Impressions |
|:------------|:---------------------|:-----------------------|:-----------|
|Ad 1         |20   (26.32)   [1.52] |980   (973.68)   [0.04] |1000        |
|Ad 2         |30   (23.68)   [1.68] |870   (876.32)   [0.05] |900         |
|Column Total |50                    |1850                    |1900        |</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Hypothesis:</strong></p>
<p>$H_0:$ Variable <em>Ad type</em> and variable <em>Whether click</em> are independent</p>
<p>$H_a:$ Variable <em>Ad type</em> and variable <em>Whether click</em> are not independent</p>
<p><strong>$\chi^2$ statistic:</strong></p>
$$\chi^2 = \sum \frac{(O_i - E_i)^2} {E_i} $$$$= \frac{(20-26.32)^2}{26.32} + \frac{(980-973.68)^2}{973.68} + \frac{(30-23.68)^2}{23.68}  + \frac{(870-876.32)^2}{876.32} = 3.2865$$
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># method 1: compute chi_score and p-value </span>
chi_score <span class="o"><-</span> <span class="m">3.2865</span>
df <span class="o"><-</span> <span class="p">(</span><span class="m">2-1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="m">2-1</span><span class="p">)</span>
<span class="m">1</span> <span class="o">-</span> pchisq<span class="p">(</span><span class="m">3.2865</span><span class="p">,</span> df<span class="o">=</span>df<span class="p">)</span>

<span class="c1"># method 2: use chisq.test directly</span>
chisq.test<span class="p">(</span>ad<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">],</span> correct <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div class="prompt"></div>
<div class="output_html rendered_html output_subarea ">
0.0698517737261586
</div>
</div>
<div class="output_area">
<div class="prompt"></div>
<div class="output_text output_subarea ">
<pre>
	Pearson's Chi-squared test

data:  ad[1:2, 1:2]
X-squared = 3.2865, df = 1, p-value = 0.06985
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>P-value is great than 0.05, fail to reject the null hypothesis. That is, variable <em>Whether click</em> and <em>Ad type</em> has no relationship, which means we can't say different Ad type has different proportion of clicks (CTR of different Ad type are different). Chi-square test got the consistent result with t-test.</p>
<p><strong>Comparison:</strong></p>
<p>In t-test, we can test the difference of two sample to see whether it's different from zero. However, if we have more than two samples from different population, Chi-square can still be implemented. For example, suppose there are three Ads, 1, 2 and 3. To Chi-square, there are two categorical variables as well, <em>Ad type</em> and <em>Whether Click</em>, we can still check whether different Ad type yield different proportion of clicks.</p>
<p>(Question: How to interpret the result if there is indeed difference, like can you conclude which Ad has higher CTR?)</p>
<p><em>(To Be Continued)</em></p>
</div>
</div>
</div>

<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'byrony'; // required: replace example with your forum shortname

                    var disqus_identifier = 'understanding-ab-testing-and-statistics-behind';
                var disqus_url = 'https://byrony.github.io/understanding-ab-testing-and-statistics-behind.html';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>

<section class="well well-sm">
    <ul class="list-group list-group-flush">
            <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
              <ul class="list-group" id="social">
                <li class="list-group-item"><a href="https://www.linkedin.com/in/xiang-cao"><i class="fa fa-linkedin-square fa-lg"></i> Linkedin</a></li>
                <li class="list-group-item"><a href="https://github.com/byrony"><i class="fa fa-github-square fa-lg"></i> Github</a></li>
              </ul>
            </li>





    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="https://www.linkedin.com/in/xiang-cao" target="_blank">
                Linkedin
            </a>
        </li>
        <li class="list-group-item">
            <a href="https://github.com/byrony" target="_blank">
                Github
            </a>
        </li>
      </ul>
    </li>
    </ul>
</section>
            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2017 Vincent
            &middot; Powered by <a href="https://github.com/getpelican/pelican-themes/tree/master/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://byrony.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://byrony.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://byrony.github.io/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'byrony'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->

</body>
</html>